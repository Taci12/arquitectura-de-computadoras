PA EQU 30H
CA EQU 32H
INT0 EQU 24H
ID_F10 EQU 9
IMR EQU 21H
EOI EQU 20H

ORG 36
DIREC_RUT_F10 DW RUT_F10

ORG 1200H
CADENA DB ?

ORG 3000H
RUT_F10: PUSH AX; en BX direccion de cadena
IN AL, PA
MOV [BX], AL
CMP AL, 0FFH
JZ NO_INCREMENTAR
INC BX
NO_INCREMENTAR: MOV AL, 20H
OUT EOI, AL
POP AX
IRET

ORG 2000H
CLI
MOV AL, 0FFH
OUT CA, AL; switches en entrada
MOV AL, ID_F10
OUT INT0, AL; id para el vector
MOV AL, 0FEH
OUT IMR, AL; desenmascaro la interrupcion por F10
MOV BX, OFFSET CADENA
MOV CX, BX
STI
LAZO: MOV DL, [BX]
CMP DL, 0FFH
JNZ LAZO
SUB BX, CX
MOV AL, BL
MOV BX, OFFSET CADENA
INT 7
HLT
END